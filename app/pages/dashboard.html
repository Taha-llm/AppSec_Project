<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Home Dashboard</title>
    <link href="/styles/main.css" rel="stylesheet">
    <script type= "module" defer="defer" src="scripts/main.js"></script>
    <style>
        body{
            background: url(/images/back1.png) no-repeat center center fixed;
        }
        @media (max-width: 428px) {
            body {
               background: url("../images/mobile.png") no-repeat center center fixed;
         }

  }
    </style>
</head>
<body>
    <!--Dashboard Section-->
    <div class="container-fluid py-4">
        <div class="row">
            <!-- User Profile Section -->
            <div class="col-md-5 left-part">
                <div class="card mb-2 m-2">
                    <div class="profile-header">
                        <h2 class="welcome-text" id="name"></h2>
                        <p class="welcome-message">Welcome Home! Easily increase comfort and save energy with Gira Smart Home solutions. </p>
                        <div class="d-flex align-items-center">
                            <img src="../images/profile.png" alt="Profile" class="profile-image">
                            <div>
                                <h5 class="profile-name" id="profile-name"></h5>
                                <small class="profile-role">Smart Home Owner</small>
                            </div>
                        </div>
                        <!-- SVG decoration -->
                        <svg class="profile-decoration" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
                            <path d="M50,0 Q100,100 50,200" stroke="white" fill="none" stroke-width="40"/>
                        </svg>
                    </div>
                </div>
                <div class="row gx-0 mt-3 " >
                     <!-- Alarm Status -->
                     <div class="col-md-6">
                        <div class="card p-3 m-2">
                          <h5 class="card-title">Alarm Status</h5>
                          <p class="text-muted small mb-3">
                            You can control your alarms with the camera feature here
                          </p>
                          <p class="mb-3">
                            Your Alarm <span class="text-danger"></span>
                            <span class="float-end text-muted small">From: 11 am</span>
                          </p>
                         <div class="form-check form-switch">
                            <input id="alarm" class="form-check-input device-switch" type="checkbox">
                        </div>
                        </div>

                        <div class="card text-center p-3 m-2 mt-3" >
                            <h6 class="text-muted">Sunrise & Sunset</h6>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                              <div>
                                <i class="fas fa-sun" style="font-size: 24px;"></i>
                                <p class="small mb-1">Sunrise</p>
                                <p id="sunrise-time" style="font-size: 18px;">--:-- AM</p>
                              </div>
                              <div>
                                <i class="fas fa-moon" style="font-size: 24px;"></i>
                                <p class="small mb-1">Sunset</p>
                                <p id="sunset-time" style="font-size: 18px;">--:-- PM</p>
                              </div>
                            </div>
                          </div> 
                      </div>
                      
                     <!-- current weather -->
                     <div class="col-md-6 weather-card mt-3">
                        <div class="weather-bg" id="weather-bg"></div>
                        <div class="weather-content">
                          <h3>Now</h3>
                          <div class="info-section">
                            <!-- Location -->
                            <p>
                              <i class="fas fa-map-marker-alt info-icon"></i>
                              <span class="location" id="location"></span>
                            </p>
                            <!-- Date -->
                            <p>
                              <i class="fas fa-calendar-day info-icon"></i>
                              <span class="date" id="current-date"></span>
                            </p>
                            <!--Current time-->
                            <p>
                                <i class="fas fa-clock info-icon"></i>
                                <span class="time" id="current-time"></span>
                              </p>
                          </div>
                          <hr class="separator">
                          <!-- Temperature Section -->
                          <div class="temperature">
                            <h1><span id="temp"></span>°C</h1>
                            <i class="fas fa-cloud weather-icon" id="weather-icon"></i>
                          </div>
                          <hr class="separator">
                          <!-- Weather Description -->
                          <p class="description" id="weather-description"></p>
                        </div>
                      </div>
                      <!-- Unlock Card -->  
                    <div class="col-md-12 gx-0 mt-3">  
                        <div class="card unlock-card text-center p-3">  
                            <div class="lock-icon">  
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 40px; height: 40px;">  
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>  
                                </svg>  
                            </div>  
                            <div class="unlock-content mt-2">  
                                <div class="unlock-title">Alarm System</div>  
                                <div class="unlock-subtitle">Slide to unlock ›</div>  
                            </div>  
                        </div>  
                    </div>  
                    
                      
                      
                    <!-- <div class="humidity-chart-container">  
                        <div class="humidity-header">  
                            <span>Humidity</span>  
                        </div>  
                        <canvas id="humidityChart"></canvas>  
                    </div> -->
                    <!-- Weather and Room Control -->
                    <!-- <div class="col-md-6">
                        <div class="card weather-card mb-4">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h3 id="current-time">11:50 AM</h3>
                                    <div>
                                        <span id="current-temp">24°C</span>
                                        <i class="fas fa-sun ms-2"></i>
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-6">
                                        <div class="text-center">
                                            <i class="fas fa-sunrise fa-2x mb-2"></i>
                                            <p>Sunrise</p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="text-center">
                                            <i class="fas fa-sunset fa-2x mb-2"></i>
                                            <p>Sunset</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
        
                    </div> -->
                
                </div>
                
            </div>

            <!-- Control Section -->
            <!--Choose your place to control-->
            <div class="card shadow-sm p-4 col-md-7">
                <div class="room-selector">
                    <div class="room-option">
                        <input type="radio" name="room" id="living-room" value="living-room">
                        <label for="living-room">
                            <i class="fas fa-couch"></i>
                            Living Room
                        </label>
                    </div>
                    <div class="room-option">
                        <input type="radio" name="room" id="bedroom" value="bedroom">
                        <label for="bedroom">
                            <i class="fas fa-bed"></i>
                            Bedroom
                        </label>
                    </div>
                    <div class="room-option">
                        <input type="radio" name="room" id="kitchen" value="kitchen" checked>
                        <label for="kitchen">
                            <i class="fas fa-kitchen-set"></i>
                            Kitchen
                        </label>
                    </div>
                </div>
    
                <div class="row">
                    <!-- Left Column -->
                    <div class="col-md-6">
                        <!-- Temperature Card -->
                        <div class="temperature-card">
                            <h3 class="temperature-title">Kitchen Water Consumption</h3>
                            <div class="temperature-display" id="kitchenwater"></div>
                        </div>
                        <div class="row">
                            <!-- Air Quality -->
                            <div class="col-md-6 air-quality-card">
                                <div class="air-quality-header">
                                    <h2 class="air-quality-title">Air Quality</h2>
                                    <!-- <div class="form-check form-switch">
                                        <input class="form-check-input device-switch" type="checkbox" checked>
                                    </div> -->
                                </div>
                                
                                <div class="air-quality-main">
                                    <div class="air-quality-indicators">
                                        <div class="indicator">
                                            <i class="fas fa-moon"></i>
                                            
                                        </div>
                                        <div class="indicator">
                                            <i class="fas fa-wind"></i>
                                            
                                        </div>
                                        <div class="indicator">
                                            <i class="fas fa-clock"></i>
                                           
                                        </div>
                                    </div>
                                    
                                    <div class="air-quality-circle">
                                        <div class="circle-bg"></div>
                                        <div class="circle-value">
                                            <span id="Air_Quality"class="value-number"></span>
                                            <span id="air_status" class="value-label"></span>
                                        </div>
                                    </div>
                                </div> 
                                
                                <div class="air-quality-footer">
                                    <div class="timer">
                                        Timer
                                        <div class="status-value">1h : 30m</div>
                                    </div>
                                    <div class="wind-status">
                                        Wind
                                        <div class="status-value">Strong</div>
                                    </div>
                                </div>
                            </div>
                            <!--Manage sensor -->
                            <div class="col-md-6">
                                <div class="control-box">
                                    <div class="control-left">
                                        <div class="icon-container">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                            </svg>
                                        </div>
                                        <span class="control-name">Central light</span>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input id="light" class="form-check-input device-switch" type="checkbox">
                                    </div>
                                </div>
                            
                                <div class="control-box">
                                    <div class="control-left">
                                        <div class="icon-container">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                            </svg>
                                        </div>
                                        <span class="control-name">Air Conditioner</span>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input id="airConditioner" class="form-check-input device-switch" type="checkbox">
                                    </div>
                                </div>
                                <div class="control-box">
                                    <div class="control-left">
                                        <div class="icon-container">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8zm0-16c-4.418 0-8 1.791-8 4s3.582 4 8 4 8-1.791 8-4-3.582-4-8-4z M12 3v4M8 7l-2 2M16 7l2 2"/>
                                            </svg>
                                        </div>
                                        <span class="control-name">Water Tap</span>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input id="ev" class="form-check-input device-switch" type="checkbox" >
                                    </div>
                                </div>
                                <div class="control-box">
                                    <div class="control-left">
                                        <div class="icon-container">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                                            </svg>
                                        </div>
                                        <span class="control-name">Garage Door</span>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input id="garageDoor" class="form-check-input device-switch" type="checkbox">
                                    </div>
                                </div>
                            
                            </div>
                        </div>
    
                        </div>
                    <!-- Right Column -->
                    <div class="col-md-6">
                        <div class="right-column">
                            <!-- Header -->
                            <div class="header-section">
                                <h2 class="title">All devices</h2>
                                <a href="#" class="add-device">Add new device +</a>
                            </div>
                
                            <!-- Devices Grid -->
                            <div class="device-grid">
                                <!-- Refrigerator -->
                                <!-- <div class="device-card">
                                    <div class="device-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v16M19 3v16M9 3h6v4H9zM9 11h6v4H9z"/>
                                        </svg>
                                    </div>
                                    <p class="device-name">Refrigerator</p>
                                    <label class="toggle-switch switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div> -->
                
                                <!-- Oven -->
                                <!-- <div class="device-card">
                                    <div class="device-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v14a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm4 5h8m-8 4h8"/>
                                        </svg>
                                    </div>
                                    <p class="device-name">Oven</p>
                                    <label class="toggle-switch switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div> -->
                                <div class="temperature-card">
                                    <h3 class="temperature-title">Current Humidty</h3>
                                    <div class="temperature-display" id="humidity"></div>
                                </div>
                                <div class="temperature-card">
                                    <h3 class="temperature-title">Overwall Water Consumption</h3>
                                    <div class="temperature-display" id="water"></div>
                                </div>
                            </div>
                
                            <!-- Temperature Card -->
                            <div class="temperature-card">
                                <h3 class="temperature-title">Current Temperature</h3>
                                <div class="temperature-display" id="temperature"></div>
                                <div class="temperature-status" id="temperature_status"></div>
                            </div>
                
                            <!-- Unlock Door -->
                            <div class="unlock-card">
                                <div class="lock-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                                    </svg>
                                </div>
                                <div class="unlock-content">
                                    <div class="unlock-title">Unlock door</div>
                                    <div class="unlock-subtitle">slide to unlock ›</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
            
        </div>
    </div>
    <script>
        // Update time
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Humidity Chart  
        // const ctx = document.getElementById('humidityChart').getContext('2d');  
        // new Chart(ctx, {  
        //     type: 'line',  
        //     data: {  
        //         labels: ['M', 'Tu', 'W', 'Th', 'F', 'Sat', 'Su'],  
        //         datasets: [{  
        //             label: 'Humidity',  
        //             data: [50, 60, 70, 65, 70, 75, 73],  
        //             borderColor: '#ff6f61',  
        //             tension: 0.4,  
        //             fill: true,  
        //             backgroundColor: 'rgba(255, 111, 97, 0.2)',  
        //             pointRadius: 5  
        //         }]  
        //     },  
        //     options: {  
        //         plugins: { legend: { display: false } },  
        //         scales: {  
        //             y: {  
        //                 beginAtZero: true,  
        //                 ticks: {  
        //                     color: '#9897AD',  
        //                     callback: function(value) {  
        //                         return (value % 25 === 0) ? value + '%' : '';  
        //                     }  
        //                 },  
        //                 min: 0,  
        //                 max: 100,  
        //                 stepSize: 25,  
        //                 grid: { display: false } // Hide grid lines on Y-axis  
        //             },  
        //             x: {  
        //                 grid: { display: false }, // Hide grid lines on X-axis  
        //                 ticks: {  
        //                     color: '#9897AD',  
        //                 }  
        //             }  
        //         },  
        //         responsive: true,  
        //     }  
        // });
        // Water consumption chart
        const ctx = document.getElementById('waterChart').getContext('2d');
        
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    data: [45000, 40000, 45000, 70000, 65000, 60000, 48000, 70000, 55000],
                    borderColor: '#FFB800',
                    backgroundColor: '#FFB800',
                    pointBackgroundColor: '#FFB800',
                    pointBorderColor: '#FFB800',
                    pointRadius: 4,
                    pointHoverRadius: 6,
                    borderWidth: 2,
                    tension: 0.4,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'white',
                        titleColor: '#333',
                        bodyColor: '#333',
                        borderColor: '#ddd',
                        borderWidth: 1,
                        padding: 10,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return context.raw.toLocaleString() + ' L';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100000,
                        ticks: {
                            stepSize: 20000,
                            callback: function(value) {
                                return (value/1000).toLocaleString() + ',000';
                            },
                            font: {
                                size: 12,
                                color: '#999'
                            },
                            padding: 10
                        },
                        grid: {
                            color: '#f0f0f0',
                            drawBorder: false,
                            drawTicks: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12,
                                color: '#999'
                            },
                            padding: 10
                        }
                    }
                },
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 10,
                        bottom: 10
                    }
                }
            }
        });
        // ESP32 Camera Integration
        function setupCamera() {
            // Replace with your ESP32 camera stream URL
            const videoElement = document.getElementById('camera-feed');
            // videoElement.src = 'http://your-esp32-ip-address/stream';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupCamera();
        });

    


        
    </script>
</body>
</html>